Disable Unranked
Without altering Slippi itself, there's no way for us to use matchmaking to our advantage, as most of the
matchmaking code exists in Slippi dolphin code.
As a result, we'll simply make the option unusable.
[_glook]
Revision ---- DOL Offset ---- Hex to Replace ---------- ASM Code -
<funOnlineSubmenuThinkSDR> NTSC 1.02
7C0802A6 90010004
9421FF50 BE810008
3C60804A 3BA304F0 # 250, FN_OnlineSubmenuThink
38600004 3D808022
618C9624 7D8903A6 # 260
4E800421 907D000C
3BC00000 93DD0008 # 270
546006F7 41820160
38000005 B00DB528 # 280
3BE00001 3B9E0000
9BFD0011 5783063E # 290
3D80801A 618C36A0
7D8903A6 4E800421 # 2A0
7C60F838 7C84F038
7C83F278 7C00F278 # 2B0
7C600379 4182000C
5783063E 48000014 # 2C0
3B9C0001 2C1C0004
4180FFC4 38600000 # 2D0
3D808016 618C77E8
7D8903A6 4E800421 # 2E0
A01D0002 2C000000 # 0 - Ranked
41820030 2C000001 # 2F0, 1 - Unranked
41820024 2C000002 # 2F8
41820040 2C000003
41820040 2C000004
41820054 2C000005
41820054 48000258
38600003 3D808002
618C4030 7D8903A6
4E800421 48000240
38600001 4800004C
38600002 48000044
38600001 3D808002
618C4030 7D8903A6
4E800421 388000B6
48000058 388000B7
48000050 38600001
3D808002 618C4030
7D8903A6 4E800421
388000B8 48000034
986DAFA0 38600001
3D808002 618C4030
7D8903A6 4E800421
38600008 3D808022
618C9860 7D8903A6
4E800421 480001C0
806DAFC4 98830000
38800001 38A00001
3D808000 618C55F0
7D8903A6 4E800421
4800019C 546006B5
418200D0 38600000
3D808002 618C4030
7D8903A6 4E800421
9BDD0011 38600005
38000001 B06DB528
38600003 889D0000
989D0001 981D0000
38000002 B01D0002
3D808022 618CB3A0
7D8903A6 4E800421
3D808039 618C0CD4
7D8903A6 4E800421
806DC17C 3D808039
618C0228 7D8903A6
4E800421 3C60803F
3863B6B0 83830024
281C0000 41820110
38600000 38800001
38A00080 3D808039
618C01F0 7D8903A6
4E800421 389C0000
38A00000 3D808038
618CFD54 7D8903A6
4E800421 808DC19C
8803000D 508026B6
9803000D 480000C8
546007FF 41820060
38600002 3D808002
618C4030 7D8903A6
4E800421 3BE00005
3B9D0002 A07C0000
28030000 41820010
3803FFFF B01C0000
48000008 B3FC0000
38600008 A09C0000
3D808022 618C9938
7D8903A6 4E800421
2C030000 4182FFC8
48000064 546007BD
4182005C 38600002
3D808002 618C4030
7D8903A6 4E800421
3B9D0002 A07C0000
28030005 41820010
38030001 B01C0000
48000008 B3DC0000
38600008 A09C0000
3D808022 618C9938
7D8903A6 4E800421
2C030000 4182FFC8
48000004 3D808000
618C5618 7D8903A6
4E800421 7F6802A6
387B0004 7C6903A6
4E800421 387B0008
7C6903A6 4E800421
BA810008 800100B4
382100B0 7C0803A6
4E800021 803EB57C
430C0000 803EB684
06000000 4E800021
06450646 06470648
0649064A

NTSC 1.02 --- 0x801b1044 ---- 3BA30B90 -> Branch
3BA30B90    # addi r29, r3, 2960    # Code at hook location
# Set think function
3C60803E    # lis r3, 0x803e
6063B760    # ori r3, r3, 0xb760
lis r4, <<funOnlineSubmenuThinkSDR>>@h
ori r4, r4, <<funOnlineSubmenuThinkSDR>>@l
90830000    # stw r4, 0(r3)

# Now we replace the description for it
3C608131    # lis r3, 0x8131
6063A5A4    # ori r3, r3, 0xA5A4
lis r4, <<wsrDisabledUnrankedDescription>>@h
ori r4, r4, <<wsrDisabledUnrankedDescription>>@l
90830000    # stw r4, 0(r3)
00000000    # Branch back


    -==-


Replace Unranked description
Since unranked is disabled, have the description link to the SD Remix chat room.
[_glook]
Revision ---- DOL Offset ---- Hex to Replace ---------- ASM Code -
<wsrDisabledUnrankedDescription> ALL
120C FF4444 0E 00B3
0080 1607 0000 FFEC
0306 0000 0000 18
# First Line (word align this or alter end 0s)
201c200d 201b1a20 31203220 371a2026 20322030 20332024 2037202c 2025202f 202820e7 1a200a20 36202e1a
20292032 20351a20 30202420 37202620 2b202820 361a2024 203720e9
19
03 # Newline
06 00000000 18
# Second Line (word align this or alter end 0s)
202b2037 20372033 20e920f0 20f0203a 203a203a 20e72036 20302024 2036202b 202f2024 20272027 20282035
20e72026 20322030 20f02017 20282037 2033202f 2024203c 20f0201c 200d201b 20282030 202c203b
19 0f0d00 00 # Extra 2 0s to word align

<wsrPlayUnrankedMatches> ALL
100caaaa aa0e00b3 00b31606 00000000  18201920 2f202420 3c1a2038 20312035
20242031 202e2028 20271a20 30202420  37202620 2b202820 3620e719 0f0d0000

NTSC 1.02 --- 0x803A63A0 ---- 7C03002E -> Branch
7D83002E    # lwzx r12, r3,r0    # Get text location
# Compare the text at r0 with wsrPlayUnrankedMatches
lis r11, <<wsrPlayUnrankedMatches>>@h
ori r11, r11, <<wsrPlayUnrankedMatches>>@l
39400000    # li r10, 0
            # CHECK_SAME_TEXT:
7D2C502E    # lwzx r9, r12, r10
7D0B502E    # lwzx r8, r11, r10
7C084800    # cmpw r8, r9
4082001C    # bne NORMAL_TEXT
394A0004    # addi r10, r10, 0x4
2C0A0040    # cmpwi r10, 0x40
4180FFE8    # blt CHECK_SAME_TEXT
lis r0, <<wsrDisabledUnrankedDescription>>@h
ori r0, r0, <<wsrDisabledUnrankedDescription>>@l
48000008    # b RETURN
            # NORMAL_TEXT:
7D806378    # mr r0, r12  # Set the normal text
            # RETURN:
00000000    # Branch back